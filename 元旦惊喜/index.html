<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>元旦惊喜</title>
<style>
    body, html {
        margin: 0;
        padding: 0;
        height: 100%;
        background: #000;
        overflow: hidden;
        font-family: "Microsoft YaHei", "微软雅黑", serif;
        color: #fff;
        user-select: none;
    }
    #container {
        width: 100vw;
        height: 100vh;
        perspective: 1000px;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
    }
    .scene {
        width: 300px;
        height: 300px;
        position: relative;
        transform-style: preserve-3d;
        animation: slightRotate 20s infinite linear;
    }
    @keyframes slightRotate {
        0% { transform: rotateY(0deg); }
        100% { transform: rotateY(360deg); }
    }
    .box {
        width: 200px;
        height: 100px;
        position: absolute;
        top: 100px;
        left: 50px;
        transform-style: preserve-3d;
        transition: all 2s ease-in-out;
    }
    .lid, .base {
        width: 200px;
        height: 100px;
        background: linear-gradient(#8b4513, #a0522d);
        position: absolute;
        border-radius: 10px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.8);
    }
    .lid {
        transform-origin: top;
        transform: rotateX(0deg);
        background: linear-gradient(#a0522d, #cd853f);
        z-index: 10;
        animation: openLid 4s forwards 1s;
    }
    @keyframes openLid {
        0% { transform: rotateX(0deg); }
        100% { transform: rotateX(-120deg); }
    }
    .base { transform: translateZ(0); }

    .ring {
        width: 150px;
        position: absolute;
        top: 50px;
        left: 25px;
        opacity: 0;
        animation: showRing 2s forwards 5s;
        filter: drop-shadow(0 0 20px #fff);
    }
    @keyframes showRing {
        to { opacity: 1; transform: translateY(-30px); }
    }

    .message1, .message2, .message3 {
        position: absolute;
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        text-align: center;
        padding: 20px;
        box-sizing: border-box;
        opacity: 0;
        pointer-events: none;
        transition: opacity 1s;
    }
    .message1.active, .message2.active, .message3.active {
        opacity: 1;
        pointer-events: all;
    }
    .big-text {
        font-size: 2.5em;
        margin-bottom: 40px;
        line-height: 1.5;
    }
    .love-btn {
        padding: 15px 40px;
        font-size: 1.8em;
        background: #ff1493;
        color: white;
        border: none;
        border-radius: 50px;
        cursor: pointer;
        box-shadow: 0 0 20px #ff1493;
        animation: pulse 2s infinite;
    }
    @keyframes pulse {
        0% { box-shadow: 0 0 20px #ff1493; }
        50% { box-shadow: 0 0 40px #ff69b4; }
        100% { box-shadow: 0 0 20px #ff1493; }
    }
    .final-text {
        font-size: 1.8em;
        line-height: 2;
        max-width: 90%;
    }
    canvas {
        position: absolute;
        top: 0;
        left: 0;
        pointer-events: none;
    }
</style>
</head>
<body>

<div id="container">
    <!-- 戒指盒 -->
    <div class="scene">
        <div class="box">
            <div class="lid"></div>
            <div class="base"></div>
        </div>
        <img src="ring.jpg" class="ring" alt="戒指">
    </div>

    <!-- 第一段文字 + 按钮 -->
    <div class="message1" id="msg1">
        <div class="big-text">老婆元旦快乐！<br>戴上戒指我们一直在一起</div>
        <button class="love-btn">我爱你</button>
    </div>

    <!-- 第二段（卡片照片 + 快递提示） -->
    <div class="message2" id="msg2">
        <img src="card.jpg" style="max-width:90%; max-height:60vh; border-radius:10px; box-shadow:0 0 30px #fff;">
        <div style="margin-top:30px; font-size:2em;">
            快递正在路上~<br>拿快递call我一起见证幸福的时刻
        </div>
    </div>

    <!-- 最后一页真心话 -->
    <div class="message3" id="msg3">
        <div class="final-text">
            其实让你选2 3就是给自己选礼物哈哈哈<br>
            先跟我宝宝滑跪道歉骗了你<br>
            这不是要准备惊喜嘛~<br><br>
            元旦快乐 我爱你呀宝宝<br>
            要一直陪伴彼此好嘛~
        </div>
    </div>
</div>

<canvas id="heartCanvas"></canvas>

<script>
// 点击任意地方进入第一段文字
document.addEventListener('click', function nextStep1() {
    document.getElementById('msg1').classList.add('active');
    document.removeEventListener('click', nextStep1);
});

// 点击“我爱你”按钮 → 爱心粒子 + 显示卡片
document.querySelector('.love-btn').addEventListener('click', function() {
    document.getElementById('msg1').style.opacity = '0';
    startHeartParticles();
    setTimeout(() => {
        document.getElementById('msg2').classList.add('active');
    }, 1000);
});

// 再点击任意地方 → 最后一页
document.addEventListener('click', function nextStep3(e) {
    if (document.getElementById('msg2').classList.contains('active')) {
        document.getElementById('msg2').style.opacity = '0';
        document.getElementById('msg3').classList.add('active');
        stopHeartParticles();
        document.removeEventListener('click', nextStep3);
    }
});

// 爱心粒子特效
let canvas = document.getElementById('heartCanvas');
let ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
let particles = [];
let animationId;

function startHeartParticles() {
    function Particle() {
        this.x = Math.random() * canvas.width;
        this.y = canvas.height + 50;
        this.vx = Math.random() * 4 - 2;
        this.vy = Math.random() * -5 - 5;
        this.size = Math.random() * 30 + 20;
        this.color = `hsl(${Math.random()*60 + 300}, 100%, 60%)`;
    }
    Particle.prototype.draw = function() {
        ctx.font = this.size + 'px Arial';
        ctx.fillText('❤️', this.x, this.y);
    };
    Particle.prototype.update = function() {
        this.x += this.vx;
        this.y += this.vy;
        this.vy += 0.2;
        this.size *= 0.98;
    };

    function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles.forEach((p, i) => {
            p.update();
            p.draw();
            if (p.y > canvas.height || p.size < 5) particles.splice(i, 1);
        });
        if (particles.length < 100) {
            for (let i = 0; i < 5; i++) particles.push(new Particle());
        }
        animationId = requestAnimationFrame(animate);
    }
    animate();
}

function stopHeartParticles() {
    cancelAnimationFrame(animationId);
    ctx.clearRect(0, 0, canvas.width, canvas.height);
}

window.addEventListener('resize', () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
});
</script>

</body>
</html>
